# Netty集群应用
本程序主要用于和客户端进行数据交互的后台程序，完美整合了Netty和Springboot，基于zookeeper和redis实现分布式集群

## 性能指标
- 线程数：boss线程1个，work线程[CPU核数 + 1，CPU核数*2 ]个，业务线程池
- 读写超时时间：45秒
- 客户端重连间隔：1分钟，1分钟内不需要重新登录
- 心跳间隔：最大空闲180秒
- 全双工
- 长连接
- 支持会话
- 拒绝重复登录
- 流量监控
- 流量整形
- 文件下载
- 文件上传
- 时间校正
- 数据断点重传

## 关于Netty
### 核心对象
handler  
encoder  
decoder  

### 线程模型
#### Reactor单线程模型
没撒说的，就一个线程处理所有事情

#### Reactor多线程模型
- 专门由一个Reactor线程-Acceptor线程用于监听服务端，接收客户端连接请求；
- 网络I/O操作读、写等由Reactor线程池负责处理；
- 一个Reactor线程可同时处理多条链路，但一条链路只能对应一个Reactor线程，这样可避免并发操作问题。

#### Reactor主从多线程模型
主线程池处理连接相关  
从线程池处理后续操作

## 常见问题总结
- Linux系统文件句柄个数限制：默认最大100个
- CLOSE_WAIT
- 接收缓冲区大小问题
- 发送缓冲区大小问题
- GC压力和内存池
- 日志阻塞IO线程问题
- TCP参数优化：发送接收缓冲区
- JVM参数优化

参考：https://www.cnblogs.com/shihaiming/p/9561817.html

